(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d228934"],{da89:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("panel",{attrs:{title:"แก้ไขข้อมูลพนักงาน"}},[r("div",{staticClass:"my-3 ml-5"},[r("p",[t._v("กรอกข้อมูลส่วนตัว")])]),r("div",{staticClass:"vx-row mr-5 ml-5"},[r("form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"`required`"}],attrs:{label:"ชื่อ-สกุล",col:4},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),r("form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"`required`"}],attrs:{label:"รหัสพนักงาน",col:4},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),r("custom-tree-select",{staticClass:"vx-col my-5",attrs:{url:"/api/setting/master/user",col:4},model:{value:t.form.setting_master_users_id,callback:function(e){t.$set(t.form,"setting_master_users_id",e)},expression:"form.setting_master_users_id"}})],1),r("div",{staticClass:"vx-row mr-5 ml-5"},[r("form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"`required`"}],attrs:{label:"สาขา",col:4},model:{value:t.form.branch,callback:function(e){t.$set(t.form,"branch",e)},expression:"form.branch"}})],1),r("div",{staticClass:"my-3 ml-5"},[r("p",[t._v("กรอกข้อมูลบัญชีผู้ใช้")])]),r("div",{staticClass:"vx-row mr-5 ml-5"},[r("form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"`required`"}],attrs:{label:"อีเมล",col:4},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),r("form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"`required`"}],attrs:{label:"ชื่อบัญชีผู้ใช้",col:4},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),r("form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"`required`"}],attrs:{label:"รหัสผ่าน",col:4},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),r("div",{staticClass:"my-3 ml-5"},[r("p",[t._v("แนบรูปถ่ายหน้าตรง")])]),r("div",{staticClass:"vx-row ml-5"},[r("attached",{ref:"upload",attrs:{attached_id:t.form.id,model:t.data_model,readOnly:!1}})],1),r("br"),r("vs-row",{attrs:{"vs-type":"flex","vs-justify":"flex-end"}},[r("vs-col",{attrs:{"vs-type":"flex","vs-justify":"flex-end","vs-align":"center"}},[r("vs-button",{staticClass:"mr-3",on:{click:function(e){return t.updateData()}}},[t._v("บันทึก")]),r("router-link",{attrs:{to:"/employee/Index"}},[r("vs-button",{attrs:{color:"danger",type:"filled"}},[t._v("ยกเลิก")])],1)],1)],1)],1),r("edit-contact",{staticClass:"my-5"})],1)},n=[],i=(r("7f7f"),r("96cf"),r("3b8d")),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("panel",{attrs:{title:"แก้ไขข้อมูลติดต่อ"},scopedSlots:t._u([{key:"header-right",fn:function(){return[r("vs-button",{attrs:{color:"primary",type:"filled"},on:{click:function(e){t.activePrompt1=!0}}},[t._v("เพิ่ม")])]},proxy:!0}])},[r("div",[r("vs-prompt",{attrs:{title:"เพิ่มข้อมูลติดต่อ",color:"success",active:t.activePrompt1},on:{accept:t.acceptAlertAddContact,"update:active":function(e){t.activePrompt1=e}}},[r("div",{staticClass:"con-exemple-prompt"},[r("form-input",{attrs:{label:"ประเภท",col:12},model:{value:t.add.type,callback:function(e){t.$set(t.add,"type",e)},expression:"add.type"}}),r("form-input",{attrs:{label:"ค่า",col:12},model:{value:t.add.value,callback:function(e){t.$set(t.add,"value",e)},expression:"add.value"}})],1)]),r("vs-prompt",{attrs:{title:"แก้ไขข้อมูลติดต่อ",color:"warning",active:t.activePrompt2},on:{accept:t.acceptEdit,"update:active":function(e){t.activePrompt2=e}}},[r("div",{staticClass:"con-exemple-prompt"},[r("form-input",{attrs:{label:"ประเภท",col:12},model:{value:t.edit.type,callback:function(e){t.$set(t.edit,"type",e)},expression:"edit.type"}}),r("form-input",{attrs:{label:"ค่า",col:12},model:{value:t.edit.value,callback:function(e){t.$set(t.edit,"value",e)},expression:"edit.value"}})],1)]),r("vs-table",{attrs:{"max-items":"3",pagination:"",data:t.form.user_contacts},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,(function(e,n){return r("vs-tr",{key:n},[r("vs-td",[t._v("\n            "+t._s(a[n].type)+"\n          ")]),r("vs-td",[t._v("\n            "+t._s(a[n].value)+"\n          ")]),r("vs-td",[r("div",{staticClass:"flex mb-3",attrs:{align:"center"}},[r("div",{staticClass:"w-1/6 bg-grid-color h-12"},[r("vs-button",{attrs:{delay:"10s",color:"primary",type:"flat","icon-pack":"feather",icon:"icon-edit"},on:{click:function(e){return t.openConfirmEdit(a[n])}}})],1),r("div",{staticClass:"w-1/6 bg-grid-color h-12"},[r("vs-button",{attrs:{color:"danger",type:"flat","icon-pack":"feather",icon:"icon-trash"},on:{click:function(e){return t.openConfirmDelete(a[n])}}})],1),r("div",{staticClass:"w-1/6 bg-grid-color-secondary h-12"})])])],1)}))}}])},[r("template",{slot:"thead"},[r("vs-th",[t._v(" ประเภท ")]),r("vs-th",[t._v(" รายละเอียด ")]),r("vs-th")],1)],2)],1)])},c=[],o=(r("8e6e"),r("ac6a"),r("456d"),r("bd86"));function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){Object(o["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var d={name:"edit-contact",data:function(){return{activePrompt1:!1,activePrompt2:!1,contacts:[],form:{user_contacts:[]},add:{user_id:"",value:"",type:""},edit:{user_id:"",value:"",type:""}}},methods:{setID:function(){this.id=this.$route.query.id,this.edit.user_id=this.id,this.add.user_id=this.id},loadDataTable:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.get("/api/user/".concat(this.id));case 3:e=t.sent,r=e.data,this.form.user_contacts=r.data.user_contacts,t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),acceptAlertAddContact:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post("/api/usercontact/".concat(this.id),this.add);case 2:return t.next=4,this.loadDataTable();case 4:return t.next=6,this.setDataNull();case 6:this.$vs.notify({color:"success",title:"เพิ่มข้อมูลสำเร็จ",text:"เพิ่มข้อมูลสมาชิกสำเร็จ"});case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),setDataNull:function(){this.add.type="",this.add.value=""},openConfirmEdit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return","");case 2:this.edit=u({},e),this.activePrompt2=!0;case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),acceptEdit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.put("/api/usercontact/".concat(this.id,"/").concat(this.edit.id),this.edit);case 2:return t.next=4,this.loadDataTable();case 4:return t.next=6,this.$vs.notify({color:"warning",title:"ยืนยันการแก้ไขข้อมูล",text:"แก้ไขข้อมูลสำเร็จ"});case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),openConfirmDelete:function(t){this.deleteUserContact=t,this.$vs.dialog({type:"confirm",color:"danger",title:"คุณต้องการลบข้อมูลใช่หรือไม่",text:"ลบข้อมูล ".concat(this.deleteUserContact.value),accept:this.acceptDelete,acceptText:"ยืนยัน",cancelText:"ยกเลิก"})},acceptDelete:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.delete("/api/usercontact/".concat(this.id,"/").concat(this.deleteUserContact.id));case 3:return t.next=5,this.loadDataTable();case 5:t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),t.t0;case 10:return t.next=12,this.$vs.notify({color:"danger",title:"ยืนยันการลบข้อมูล",text:"ลบข้อมูลสำเร็จ"});case 12:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.setID(),this.loadDataTable()}},p=d,m=r("2877"),v=Object(m["a"])(p,s,c,!1,null,null,null),f=v.exports,h={components:{EditContact:f},data:function(){return{data_id:"",data_model:"App\\Models\\User",form:{name:"",email:"",username:"",password:"",setting_master_users_id:"",branch:"",code:""}}},methods:{setData:function(){this.form.id=this.$route.query.id},loadData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.get("/api/user/".concat(this.form.id));case 3:e=t.sent,r=e.data,this.form=r.data,t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),updateData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$validator.validateAll();case 3:if(e=t.sent,!e){t.next=9;break}return t.next=7,this.$vs.dialog({type:"confirm",color:"success",title:"คุณต้องการแก้ไขข้อมูลหรือไม่",text:"แก้ไขข้อมูลพนักงานชื่อ ".concat(this.form.name),acceptText:"ยืนยัน",cancelText:"ยกเลิก",accept:this.acceptUpdate});case 7:t.next=11;break;case 9:return t.next=11,this.$vs.dialog({color:"danger",title:"สถานะการแก้ไขข้อมูล",text:"แก้ไขข้อมูลพนักงานไม่สำเร็จ",acceptText:"ปิด"});case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log("err",t.t0);case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}(),acceptUpdate:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.put("/api/user/".concat(this.form.id),this.form);case 3:return e=t.sent,this.data_id=e.data.data.id,this.$refs.upload.id=e.data.data.id,t.next=8,this.$refs.upload.submit();case 8:return r=t.sent,console.log(r),t.next=12,this.$vs.notify({color:"success",title:"ยืนยันการแก้ไขข้อมูล",text:"แก้ไขข้อมูลสำเร็จ"});case 12:return t.next=14,this.$router.push({name:"index_em",query:{}});case 14:t.next=19;break;case 16:throw t.prev=16,t.t0=t["catch"](0),t.t0;case 19:case"end":return t.stop()}}),t,this,[[0,16]])})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){var t=this;this.setData(),setTimeout((function(){t.loadData()}),0)}},x=h,b=Object(m["a"])(x,a,n,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2d228934.497e5514.js.map