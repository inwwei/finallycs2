(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d217cac"],{c7df:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("panel",{attrs:{title:"เพิ่มข้อมูลพนักงาน"}},[r("div",{staticClass:"ml-5 my-3"},[r("p",[e._v("กรอกข้อมูลส่วนตัว")])]),r("div",{staticClass:"vx-row mr-5 ml-5"},[r("form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"`required`"}],attrs:{label:"ชื่อ-สกุล",col:4},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),r("form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"`required`"}],attrs:{label:"รหัสพนักงาน",col:4},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}}),r("custom-tree-select",{staticClass:"vx-col my-5",attrs:{url:"/api/setting/master/user",col:4},model:{value:e.form.setting_master_users_id,callback:function(t){e.$set(e.form,"setting_master_users_id",t)},expression:"form.setting_master_users_id"}})],1),r("div",{staticClass:"vx-row mr-5 ml-5"},[r("form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"`required`"}],attrs:{label:"สาขา",col:4},model:{value:e.form.branch,callback:function(t){e.$set(e.form,"branch",t)},expression:"form.branch"}})],1),r("div",{staticClass:"my-3 ml-5"},[r("p",[e._v("กรอกข้อมูลบัญชีผู้ใช้")])]),r("div",{staticClass:"vx-row mr-5 ml-5"},[r("form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"`required`"}],attrs:{label:"อีเมล",col:4},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),r("form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"`required`"}],attrs:{label:"ชื่อบัญชีผู้ใช้",col:4},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),r("form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"`required`"}],attrs:{label:"รหัสผ่าน",col:4},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("div",{staticClass:"ml-5 my-5"},[r("p",[e._v("เพิ่มข้อมูลติดต่อ")])]),r("div",[r("div",{staticClass:"mb-3",attrs:{align:"right"}},[r("vs-button",{attrs:{color:"primary",type:"filled"},on:{click:function(t){e.activePrompt1=!0}}},[e._v("เพิ่มข้อมูล")])],1),r("vs-prompt",{attrs:{title:"เพิ่มข้อมูลติดต่อ",color:"success",active:e.activePrompt1},on:{accept:e.acceptInsertContact,close:e.close,"update:active":function(t){e.activePrompt1=t}}},[r("div",{staticClass:"con-exemple-prompt"},[r("div",[e._v("ประเภท")]),r("form-input",{attrs:{label:"ประเภท",col:12},model:{value:e.tempContact.type,callback:function(t){e.$set(e.tempContact,"type",t)},expression:"tempContact.type"}}),r("form-input",{attrs:{label:"ค่า",col:12},model:{value:e.tempContact.value,callback:function(t){e.$set(e.tempContact,"value",t)},expression:"tempContact.value"}})],1)]),r("vs-table",{attrs:{pagination:"","max-items":"5",data:e.form.user_contacts},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.data;return e._l(a,(function(t,s){return r("vs-tr",{key:s},[r("vs-td",[e._v("\n              "+e._s(a[s].type)+"\n            ")]),r("vs-td",[e._v("\n              "+e._s(a[s].value)+"\n            ")]),r("vs-td",[r("div",{staticClass:"flex mb-3",attrs:{align:"center"}},[r("div",{staticClass:"w-1/6 bg-grid-color h-12"},[r("vs-button",{attrs:{color:"danger",type:"flat","icon-pack":"feather",icon:"icon-trash"},on:{click:function(t){return t.stopPropagation(),e.openConfirmDelete(s)}}})],1),r("div",{staticClass:"w-1/6 bg-grid-color-secondary h-12"})])])],1)}))}}])},[r("template",{slot:"thead"},[r("vs-th",[e._v("ลำดับ")]),r("vs-th",[e._v("ชื่อตำแหน่ง")]),r("vs-th")],1)],2)],1),r("div",{staticClass:"ml-5 my-5"},[r("p",[e._v("แนบรูปถ่ายหน้าตรง")])]),r("div",{staticClass:"vx-row ml-5"},[r("attached",{ref:"upload",attrs:{id:e.data_id,model:e.data_model}})],1),r("vs-row",{staticClass:"my-5"},[r("vs-col",{attrs:{"vs-type":"flex","vs-justify":"flex-end","vs-align":"center"}},[r("vs-button",{staticClass:"mr-3",on:{click:function(t){return e.InsertUserData()}}},[e._v("บันทึก")]),r("router-link",{attrs:{to:"/employee/Index"}},[r("vs-button",{attrs:{color:"danger",type:"filled"}},[e._v("ยกเลิก")])],1)],1)],1),r("pre",[e._v(e._s(e.form))])],1)],1)},s=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),c=(r("7f7f"),r("96cf"),r("3b8d"));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l={data:function(){return{activePrompt1:!1,data_id:"",data_model:"App\\Models\\User",users:[],form:{name:"",email:"",username:"",password:"",branch:"",code:"",setting_master_users_id:"",user_contacts:[]},tempDeleteIndex:"",tempContact:{type:"",value:""}}},methods:{InsertUserData:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$validator.validateAll();case 3:if(t=e.sent,!t){e.next=9;break}return e.next=7,this.$vs.dialog({type:"confirm",color:"success",title:"คุณต้องการเพิ่มข้อมูลหรือไม่",text:"เพิ่มข้อมูลพนักงานชื่อ ".concat(this.form.name),acceptText:"ยืนยัน",cancelText:"ยกเลิก",accept:this.acceptInsert});case 7:e.next=11;break;case 9:return e.next=11,this.$vs.dialog({color:"danger",title:"สถานะการเพิ่มข้อมูล",text:"เพิ่มข้อมูลพนักงานไม่สำเร็จ",acceptText:"ปิด"});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log("err",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(){return e.apply(this,arguments)}return t}(),acceptInsert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.post("/api/user",this.form);case 3:return t=e.sent,this.data_id=t.data.data.id,this.$refs.upload.id=t.data.data.id,e.next=8,this.$refs.upload.submit();case 8:return r=e.sent,console.log(r),e.next=12,this.$vs.notify({color:"success",title:"ยืนยันการเพิ่มข้อมูล",text:"เพิ่มข้อมูลสำเร็จ"});case 12:return e.next=14,this.$router.push({name:"index_em",query:{}});case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e["catch"](0),e.t0;case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(){return e.apply(this,arguments)}return t}(),acceptInsertContact:function(){this.form.user_contacts.push(i({},this.tempContact)),this.$vs.notify({color:"success",title:"ยืนยันการเพิ่มข้อมูล",text:"เพิ่มข้อมูลสำเร็จ"})},openConfirmDelete:function(e){this.tempDeleteIndex=e,this.deleteUserContact=this.form.user_contacts[e].value,this.$vs.dialog({type:"confirm",color:"danger",title:"คุณต้องการลบข้อมูลใช่หรือไม่",text:"ลบข้อมูลติดต่อ ".concat(this.deleteUserContact),accept:this.acceptDelete,acceptText:"ยืนยัน",cancelText:"ยกเลิก"})},acceptDelete:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.form.user_contacts.splice(this.tempDeleteIndex,1);case 2:return e.next=4,this.$vs.notify({color:"danger",title:"ยืนยันการลบข้อมูล",text:"ลบข้อมูลสำเร็จ"});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),close:function(){}}},u=l,m=r("2877"),p=Object(m["a"])(u,a,s,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d217cac.353451ee.js.map